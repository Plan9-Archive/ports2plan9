For generation of the Plan9 mkfile:

mkmk -s libtompoly -a -B -I. -I/sys/include/ape -I/$objtype/include/ape -D_POSIX_SOURCE -D_SUSV2_SOURCE -D_BSD_EXTENSION -x demo > mkfile

mkfile manually edited for proper library name and installation of header file.